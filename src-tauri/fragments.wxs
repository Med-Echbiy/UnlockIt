<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    
    <!-- AppData Preservation and Identity Fragment -->
    <!-- This ensures user data is preserved during uninstall and properly identifies your brand -->
    <Fragment>
        <DirectoryRef Id="TARGETDIR">
            <!-- Component for preserving user data and application registry -->
            <Component Id="AppDataPreservationMarker" Guid="*" Win64="yes">
                
                <!-- Registry entries for application identity and settings -->
                <!-- Following Windows installer best practices for your identity -->
                <RegistryValue Root="HKCU" 
                              Key="Software\Mohamed Echbiy\UnlockIt" 
                              Name="ApplicationName" 
                              Type="string" 
                              Value="UnlockIt - Ultimate Achievement Tracker" 
                              KeyPath="yes" />
                
                <!-- Preserve user data marker -->
                <RegistryValue Root="HKCU" 
                              Key="Software\Mohamed Echbiy\UnlockIt" 
                              Name="PreserveUserData" 
                              Type="string" 
                              Value="true" />
                
                <!-- Application version tracking -->
                <RegistryValue Root="HKCU" 
                              Key="Software\Mohamed Echbiy\UnlockIt" 
                              Name="Version" 
                              Type="string" 
                              Value="[ProductVersion]" />
                
                <!-- Installation path tracking -->
                <RegistryValue Root="HKCU" 
                              Key="Software\Mohamed Echbiy\UnlockIt" 
                              Name="InstallPath" 
                              Type="string" 
                              Value="[APPLICATIONFOLDER]" />
                
                <!-- Publisher identity -->
                <RegistryValue Root="HKCU" 
                              Key="Software\Mohamed Echbiy\UnlockIt" 
                              Name="Publisher" 
                              Type="string" 
                              Value="Mohamed Echbiy" />
                
                <!-- Website/Support URL -->
                <RegistryValue Root="HKCU" 
                              Key="Software\Mohamed Echbiy\UnlockIt" 
                              Name="SupportURL" 
                              Type="string" 
                              Value="https://github.com/Med-Echbiy/UnlockIt" />
                
            </Component>
        </DirectoryRef>
    </Fragment>

</Wix>
